#!/usr/bin/env python3\r\nfrom fastapi import FastAPI\r\nfrom fastapi.middleware.cors import CORSMiddleware\r\nfrom .db import create_db_and_tables\r\nfrom .routes import tasks\r\nimport os\r\n\r\napp = FastAPI(title="Multi-User Todo API", version="1.0.0")\r\n\r\n# CORS middleware for frontend\r\napp.add_middleware(\r\n    CORSMiddleware,\r\n    allow_origins=["http://localhost:3000", os.getenv("FRONTEND_URL", "")],\r\n    allow_credentials=True,\r\n    allow_methods=["*"],\r\n    allow_headers=["*"],\r\n)\r\n\r\n@app.on_event("startup")\r\nasync def startup_event():\r\n    await create_db_and_tables()\r\n\r\n# Include task routes\r\napp.include_router(tasks.router, prefix="/api", tags=["tasks"])\r\n\r\n@app.get("/")\r\nasync def root():\r\n    return {"message": "Multi-User Todo API is running"}\r\n\r\nif __name__ == "__main__":\r\n    import uvicorn\r\n    uvicorn.run(app, host="0.0.0.0", port=8000)
